dfs with memoization. O(n).
