In the first pass record the rightmost position of each character, then in the second pass greedily split. O(n).

