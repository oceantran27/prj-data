DP, discretize the endpoints by sorting. O(sort(n)).

