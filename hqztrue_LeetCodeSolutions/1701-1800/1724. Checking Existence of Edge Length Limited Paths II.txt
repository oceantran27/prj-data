see 1697. Checking Existence of Edge Length Limited Paths (which is the offline version).

