dfs, separate the tree using the primes and count the component sizes. O(n).

