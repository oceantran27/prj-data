1. hashing. O(n) preprocessing time, O(1) per query, O(n) extra space.
2. reservoir sampling. O(n) per query, O(1) extra space.
3. sorting. O(sort(n)) preprocessing time, O(log n) per query, O(1) extra space (tradeoff: time/memory for sorting).
