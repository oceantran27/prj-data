4n^2 states, BFS. O(n^2).
